# Product Vision
Version: v1.0

## 1. Vision / Problem / Audience / Principles

### 1.1 Назначение продукта
«Мой ежедневник органайзер» — личная система управления задачами и временем с минимальными усилиями со стороны пользователя. Цель — фиксировать входящий поток, превращать его в управляемые обязательства и давать прозрачный обзор статусов и времени.

### 1.2 Принципы (канон)
- Источник истины — база данных.
- Calendar — побочный эффект, а не источник истины.
- Никакой автологики Calendar → Task.
- Система работает без «умных» зависимостей, интеллект опционален.

### 1.3 Язык интерфейса (канон)
Всё, что видит пользователь в Telegram (тексты, статусы, действия, кнопки) — **на русском**.
В коде и БД допускаются канонические ключи на английском (NEW/PLANNED/...);
в UI всегда показываются русские названия.

**Отображение статусов (UI)**
| Канонический state (внутри) | Русское отображение (Telegram/UI) |
| --- | --- |
| NEW | Новая |
| PLANNED | Запланирована |
| SCHEDULED | В календаре |
| DONE | Выполнена |
| FAILED | Ошибка |
| CANCELLED | Отменена |

**Сущности (UI)**
| Внутри | UI (RU) |
| --- | --- |
| Task | Задача |
| Subtask | Подзадача |
| Calendar event | Событие календаря |
| plan / planned_at | План / время планирования |
| sync tick | тик синхронизации (в UI: «синхронизация») |

### 1.4 UX: кнопки и простота
Основной UX — **кнопки**. Пользователь **не обязан** помнить команды.
Команды допустимы как вспомогательный путь.

Минимальный канон кнопок:
- Запланировать
- Перенести
- Снять с плана
- Отменить задачу
- Выполнено
- Да / Нет
- Дальше
- Назад

### 1.5 Семантика действий

**Снять с плана (не терминально)**
Смысл: «не буду делать сейчас, вернусь позже, дату не знаю».

Эффект:
- если было событие в календаре → событие удаляется/снимается;
- задача **не** становится CANCELLED;
- задача возвращается в состояние **без обязательства по времени** (обычно NEW; допускается PLANNED без даты, но предпочтительно NEW);
- история задачи сохраняется.

**Отменить задачу (терминально)**
Смысл: «обязательство снять навсегда / больше не актуально».

Эффект:
- state = CANCELLED;
- если было событие в календаре → событие удаляется;
- задача **не удаляется** из БД и остаётся в истории как «Отменена».

**Удалить задачу (будущее)**
Физическое удаление задачи **не входит** в текущий контур.
Рассматривается как future-функция.

## 2. Metrics

### 2.1 Зачем метрики
- Управляемость: понимать, что реально происходит с задачами и календарём.
- Надёжность: измерять качество синхронизации и ошибки.
- UX: видеть, где пользователь теряет время/контроль.

### 2.2 North Star Metrics
- Доля задач, которые пользователь довёл до результата (DONE) среди запланированных.
- Надёжность синхронизации: доля успешных create/patch/cancel тиков.

### 2.3 Metrics Tree
**Ingestion**
- Task creation success rate

**Planning**
- planned_at set rate

**Calendar sync**
- create success rate
- patch success rate
- cancel success rate
- 404 rate (calendar event not found)
- retry count distribution

**Latency**
- время от planned_at до появления события

**UX friction**
- количество уточняющих шагов/кнопок до результата

### 2.4 SLO / алерты (черновые)
- create/patch/cancel success rate < 95% за 24ч → алерт
- 404 rate > 5% за 24ч → алерт
- median latency > 5 минут → алерт

### 2.5 Логи / события (требования)
Обязательные поля:
- task_id
- action
- transition
- ok
- http_status
- err
- latency_ms

### 2.6 Отчёты
Минимальный набор:
- ежедневный срез по sync-успехам и ошибкам
- недельный тренд по завершению задач и latency

**Статус:** PLANNED
